{
  "entityType" : "WIDGET_TYPE",
  "entity" : {
    "fqn" : "solenoide_sem_on_off_v_2_0_1",
    "name" : "Solenoide Sem On/Off V.2.0.1",
    "deprecated" : false,
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "timeseries",
      "sizeX" : 6.5,
      "sizeY" : 4,
      "resources" : [ ],
      "templateHtml" : "<div id=\"valve-container\">\r\n  <img id=\"valve-img\" src=\"/api/images/public/oC1FFLbQ467ScEKgxFa5fMB0qeKNXMu2\" alt=\"vÃ¡lvula\" />\r\n</div>\r\n",
      "templateCss" : "#valve-container {\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: transparent;\r\n}\r\n\r\n#valve-img {\r\n    height: 80%;\r\n    transition: transform 0.5s ease, filter 0.3s ease;\r\n}\r\n\r\n.opened {\r\n    filter: hue-rotate(60deg) brightness(1.2); /* verde/brilhante */\r\n    transform: rotate(20deg);\r\n}\r\n\r\n.closed {\r\n    filter: grayscale(100%) brightness(0.7); /* cinza opaco */\r\n    transform: rotate(0deg);\r\n}\r\n",
      "controllerScript" : "/* jshint esversion: 8 */\r\n\r\nself.onInit = function() {\r\n    updateValveVisual();\r\n    self.ctx.detectChanges();\r\n};\r\n\r\nself.onDataUpdated = function() {\r\n    updateValveVisual();\r\n    self.ctx.detectChanges();\r\n};\r\n\r\nfunction updateValveVisual() {\r\n    const value = self.ctx.data?.[0]?.data?.[0]?.[1]; // deve ser 'on' ou 'off'\r\n    const isOpen = value !== 'on';\r\n\r\n    const valve = document.getElementById('valve-img');\r\n    if (!valve) return;\r\n\r\n    valve.classList.remove('opened', 'closed');\r\n    valve.classList.add(isOpen ? 'opened' : 'closed');\r\n}\r\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Settings\",\r\n        \"properties\": {\r\n            \"centralId\": {\r\n                \"type\": \"string\",\r\n                \"title\": \"Id da Central\"\r\n            }\r\n        },\r\n        \"required\": [\"centralId\"]\r\n    },\r\n    \"form\": [\r\n        \"centralId\"\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "settingsDirective" : "",
      "dataKeySettingsDirective" : "",
      "hasBasicMode" : false,
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"${entityName}\",\"color\":\"#4caf50\",\"settings\":{},\"_hash\":0.6972230379918407,\"funcBody\":\"var value = 'on'\\nreturn value;\",\"aggregationType\":null,\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}],\"alarmFilterConfig\":{\"statusList\":[\"ACTIVE\"]}}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#673AB500\",\"color\":\"rgb(255, 255, 255)\",\"padding\":\"0\",\"settings\":{\"centralId\":\"sdfbasdfbsderfbxzdfbserfxzdcvbserb\"},\"title\":\"Solenoide Sem On/Off V.2.0.1\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"borderRadius\":\"10px\",\"configMode\":\"advanced\",\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"enableDataExport\":false}"
    },
    "externalId" : null,
    "resources" : null,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "aae31b90-466f-11f0-9291-41f94c09a8a6"
    },
    "scada" : false,
    "tags" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}