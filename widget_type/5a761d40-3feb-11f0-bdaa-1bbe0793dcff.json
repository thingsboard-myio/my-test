{
  "entityType" : "WIDGET_TYPE",
  "entity" : {
    "fqn" : "air_model_status",
    "name" : "Air model Status",
    "deprecated" : false,
    "image" : "tb-image;/api/images/tenant/Capturar_(30).PNG",
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 4.5,
      "sizeY" : 4.5,
      "resources" : [ ],
      "templateHtml" : "<div id=\"title\"\n    [ngStyle]=\"{'background-color': '#191B1F' }\">\n\n    <p id=\"titulo\">{{entityName}}</p>\n\n    <div class=\"SVGdiv\">\n        <svg *ngIf=\"data === 'on'|| data==='not_detected'\" viewBox=\"0 0 64 64\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                d=\"M61 13V27C61 28.0609 60.5786 29.0783 59.8284 29.8284C59.0783 30.5786 58.0609 31 57 31H55V27C54.9984 26.4701 54.7872 25.9623 54.4125 25.5875C54.0377 25.2128 53.5299 25.0016 53 25H11C10.4701 25.0016 9.96227 25.2128 9.58753 25.5875C9.2128 25.9623 9.00158 26.4701 9 27V31H7C5.93913 31 4.92172 30.5786 4.17157 29.8284C3.42143 29.0783 3 28.0609 3 27V13C3 11.9391 3.42143 10.9217 4.17157 10.1716C4.92172 9.42143 5.93913 9 7 9H57C58.0609 9 59.0783 9.42143 59.8284 10.1716C60.5786 10.9217 61 11.9391 61 13Z\"\n                fill=\"#e6e6e6\"></path>\n            <path\n                d=\"M26.293 47.293L24.586 49H23V47.414L24.707 45.707L23.293 44.293L22 45.586L20.707 44.293L19.293 45.707L21 47.414V49H19.414L17.707 47.293L16.293 48.707L17.586 50L16.293 51.293L17.707 52.707L19.414 51H21V52.586L19.293 54.293L20.707 55.707L22 54.414L23.293 55.707L24.707 54.293L23 52.586V51H24.586L26.293 52.707L27.707 51.293L26.414 50L27.707 48.707L26.293 47.293Z\"\n                fill=\"#0094FF\"></path>\n            <path\n                d=\"M46.293 47.293L44.586 49H43V47.414L44.707 45.707L43.293 44.293L42 45.586L40.707 44.293L39.293 45.707L41 47.414V49H39.414L37.707 47.293L36.293 48.707L37.586 50L36.293 51.293L37.707 52.707L39.414 51H41V52.586L39.293 54.293L40.707 55.707L42 54.414L43.293 55.707L44.707 54.293L43 52.586V51H44.586L46.293 52.707L47.707 51.293L46.414 50L47.707 48.707L46.293 47.293Z\"\n                fill=\"#0094FF\"></path>\n            <path\n                d=\"M57 8H7C5.67392 8 4.40215 8.52678 3.46447 9.46447C2.52678 10.4021 2 11.6739 2 13V27C2 28.3261 2.52678 29.5979 3.46447 30.5355C4.40215 31.4732 5.67392 32 7 32H8V35C8 35.2652 8.10536 35.5196 8.29289 35.7071C8.48043 35.8946 8.73478 36 9 36H55C55.2652 36 55.5196 35.8946 55.7071 35.7071C55.8946 35.5196 56 35.2652 56 35V32H57C58.3261 32 59.5979 31.4732 60.5355 30.5355C61.4732 29.5979 62 28.3261 62 27V13C62 11.6739 61.4732 10.4021 60.5355 9.46447C59.5979 8.52678 58.3261 8 57 8ZM54 34H10V32H54V34ZM54 30H10V27C10 26.7348 10.1054 26.4804 10.2929 26.2929C10.4804 26.1054 10.7348 26 11 26H53C53.2652 26 53.5196 26.1054 53.7071 26.2929C53.8946 26.4804 54 26.7348 54 27V30ZM60 27C59.9976 27.7949 59.6808 28.5566 59.1187 29.1187C58.5566 29.6808 57.7949 29.9976 57 30H56V27C55.9976 26.2051 55.6808 25.4434 55.1187 24.8813C54.5566 24.3192 53.7949 24.0024 53 24H11C10.2051 24.0024 9.4434 24.3192 8.8813 24.8813C8.31921 25.4434 8.00237 26.2051 8 27V30H7C6.20508 29.9976 5.4434 29.6808 4.8813 29.1187C4.31921 28.5566 4.00237 27.7949 4 27V13C4.00237 12.2051 4.31921 11.4434 4.8813 10.8813C5.4434 10.3192 6.20508 10.0024 7 10H57C57.7949 10.0024 58.5566 10.3192 59.1187 10.8813C59.6808 11.4434 59.9976 12.2051 60 13V27Z\"\n                fill=\"white\"></path>\n            <path d=\"M33 38H31V42H33V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M43 38H41V42H43V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M23 38H21V42H23V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M38 38H36V40H38V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M53 38H51V42H53V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M48 38H46V40H48V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M28 38H26V40H28V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M13 38H11V42H13V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M18 38H16V40H18V38Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M56 20H54V22H56V20Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M51 20H49V22H51V20Z\" fill=\"#0094FF\">\n            </path>\n            <path d=\"M46 20H44V22H46V20Z\" fill=\"#0094FF\">\n            </path>\n        </svg>\n        <svg *ngIf=\"data === 'off'|| data==='not_detected'\" viewBox=\"0 0 64 64\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                d=\"M61 13V27C61 28.0609 60.5786 29.0783 59.8284 29.8284C59.0783 30.5786 58.0609 31 57 31H55V27C54.9984 26.4701 54.7872 25.9623 54.4125 25.5875C54.0377 25.2128 53.5299 25.0016 53 25H11C10.4701 25.0016 9.96227 25.2128 9.58753 25.5875C9.2128 25.9623 9.00158 26.4701 9 27V31H7C5.93913 31 4.92172 30.5786 4.17157 29.8284C3.42143 29.0783 3 28.0609 3 27V13C3 11.9391 3.42143 10.9217 4.17157 10.1716C4.92172 9.42143 5.93913 9 7 9H57C58.0609 9 59.0783 9.42143 59.8284 10.1716C60.5786 10.9217 61 11.9391 61 13Z\"\n                fill=\"#e6e6e6\"></path>\n            <path\n                d=\"M57 8H7C5.67392 8 4.40215 8.52678 3.46447 9.46447C2.52678 10.4021 2 11.6739 2 13V27C2 28.3261 2.52678 29.5979 3.46447 30.5355C4.40215 31.4732 5.67392 32 7 32H8V35C8 35.2652 8.10536 35.5196 8.29289 35.7071C8.48043 35.8946 8.73478 36 9 36H55C55.2652 36 55.5196 35.8946 55.7071 35.7071C55.8946 35.5196 56 35.2652 56 35V32H57C58.3261 32 59.5979 31.4732 60.5355 30.5355C61.4732 29.5979 62 28.3261 62 27V13C62 11.6739 61.4732 10.4021 60.5355 9.46447C59.5979 8.52678 58.3261 8 57 8ZM54 34H10V32H54V34ZM54 30H10V27C10 26.7348 10.1054 26.4804 10.2929 26.2929C10.4804 26.1054 10.7348 26 11 26H53C53.2652 26 53.5196 26.1054 53.7071 26.2929C53.8946 26.4804 54 26.7348 54 27V30ZM60 27C59.9976 27.7949 59.6808 28.5566 59.1187 29.1187C58.5566 29.6808 57.7949 29.9976 57 30H56V27C55.9976 26.2051 55.6808 25.4434 55.1187 24.8813C54.5566 24.3192 53.7949 24.0024 53 24H11C10.2051 24.0024 9.4434 24.3192 8.8813 24.8813C8.31921 25.4434 8.00237 26.2051 8 27V30H7C6.20508 29.9976 5.4434 29.6808 4.8813 29.1187C4.31921 28.5566 4.00237 27.7949 4 27V13C4.00237 12.2051 4.31921 11.4434 4.8813 10.8813C5.4434 10.3192 6.20508 10.0024 7 10H57C57.7949 10.0024 58.5566 10.3192 59.1187 10.8813C59.6808 11.4434 59.9976 12.2051 60 13V27Z\"\n                fill=\"white\"></path>\n\n            <path d=\"M56 20H54V22H56V20Z\" fill=\"#ED4465\">\n            </path>\n            <path d=\"M51 20H49V22H51V20Z\" fill=\"#ED4465\">\n            </path>\n            <path d=\"M46 20H44V22H46V20Z\" fill=\"#ED4465\">\n            </path>\n        </svg>\n    </div>\n\n</div>",
      "templateCss" : "\n\n#title{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 5%;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n}\n\n#container {\n    overflow: hidden;\n}\n\nsvg{\n    height: 90%;\n    z-index: 2;\n}\n\n.SVGdiv{\n    height: 50%;\n    width: 100%;\n    z-index: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\np{\n    margin:0;\n   padding: 10px;\n   z-index: 3;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n#titulo{\n    font-size: 1.1rem;\n    text-align: center;\n}\n#conteudo{\n    font-size: 1.6rem;\n    font-weight: bold;\n}\n#legenda{\n    font-size: 0.9rem;\n    font-weight: 400;\n    margin: 0;\n}\n.svgOnOff{\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    fill: none;\n    transition: fill 0.3s ease;\n    z-index: 2;\n}\n\n\n.svgOnOff:hover {\n  fill: rgba(15, 196, 130, 0.44);\n}\n\n",
      "controllerScript" : "'esversion: 8'\n\nasync function sendOnOffRPC(centralId, body) {\n    const $http = self.ctx.$scope.$injector.get(\n        self.ctx.servicesMap.get('http'),\n    );\n    const response = await $http.post(`https://${centralId}.y.myio.com.br/api/OnOff`, body).toPromise();\n\n    return response;\n}\n\nasync function turnOnOff(status) {\n    const { centralId } = self.ctx.settings;\n    \n    const entityName = self.ctx.defaultSubscription\n        .data[0].datasource.entityName\n    \n    try {\n        await sendOnOffRPC(centralId, {\n            device: entityName,\n            status: status,\n        });\n\n    } catch (e) {\n        console.log(e);\n        alert('Erro ao enviar status');\n    }\n}\n\nfunction fetchData(){\n     const subscriptionData = self.ctx.data[0].data;\n     const data = !subscriptionData.length || !subscriptionData[0][1]  ? null : subscriptionData[0][1] \n    console.log(\"Data\",data)\n    self.ctx.$scope.data = data\n \n    var entityName = self.ctx.defaultSubscription.data[0].datasource.entityLabel\n    self.ctx.$scope.entityName = entityName\n}\n\nself.onInit = function() {\n    \n    fetchData()\n    self.ctx.$scope.turnOnOff = turnOnOff\n    self.ctx.detectChanges();\n}\n\nself.onDataUpdated = function() {\n   fetchData()\n    self.ctx.detectChanges();\n}\n\nself.onLatestDataUpdated = function() {\n    \n    self.ctx.detectChanges();\n}\n\n",
      "settingsSchema" : "",
      "dataKeySettingsSchema" : "{}\n",
      "settingsDirective" : "",
      "dataKeySettingsDirective" : "tb-value-card-widget-settings",
      "hasBasicMode" : true,
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = 'on'\\nreturn value;\",\"aggregationType\":null,\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}],\"alarmFilterConfig\":{\"statusList\":[\"ACTIVE\"]}}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#673AB500\",\"color\":\"rgb(255, 255, 255)\",\"padding\":\"0\",\"settings\":{\"TituloWidget\":\"Temperatura\"},\"title\":\"Air model Status\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"borderRadius\":\"10px\",\"configMode\":\"advanced\",\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"enableDataExport\":false}"
    },
    "externalId" : null,
    "resources" : null,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "5a761d40-3feb-11f0-bdaa-1bbe0793dcff"
    },
    "scada" : false,
    "tags" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}