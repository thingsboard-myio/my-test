{
  "entityType" : "WIDGET_TYPE",
  "entity" : {
    "fqn" : "hist_rico_geral_de_consumo_slaveid_gua_dev",
    "name" : "Histórico Geral de Consumo (SlaveId) (Água) DEV",
    "deprecated" : false,
    "image" : "tb-image;/api/images/tenant/Capturar_(31).PNG",
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 14,
      "sizeY" : 11.5,
      "resources" : [ {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
      }, {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      }, {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
      }, {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
      } ],
      "templateHtml" : "<div class=\"wat\">\n    <header id=\"ReportHeader\">\n <div>\n        <div id=\"myioHeader\">\n          <img src=\"https://myio.com.br/app/uploads/2020/05/Logotest01.png\" alt=\"Myio\" id=\"Myio\" />\n          <div id=\"myioTextHeader\">\n            <p>Sistema Myio</p>\n            <p>{{subtitle}}</p>\n            <p>Data de Emissão do Relatório: {{emissionDate}}<span id=\"issue-date\"></span></p>\n          </div>\n        </div>\n        <mat-form-field class=\"example-form-field hide-in-pdf\" appearance=\"fill\" style=\"margin-right: 16px; min-width: 180px;\">\n            <mat-label>Ordenar por</mat-label>\n                <mat-select [(value)]=\"selectedOrder\" (selectionChange)=\"handleManualSort($event.value)\">\n                <mat-option value=\"name-desc\">Loja ↑</mat-option>\n                <mat-option value=\"name-asc\">Loja ↓</mat-option>\n                <mat-option value=\"kWh-desc\">Leitura ↑</mat-option>\n                <mat-option value=\"kWh-asc\">Leitura ↓</mat-option>\n            </mat-select>\n        </mat-form-field>\n        <button class=\"hide-in-pdf button\" (click)=\"downloadPDF()\">\n            <i class=\"fa-solid fa-file-arrow-down\" style=\"color: #0a0a0a;\"></i>\n        </button>\n        <button class=\"hide-in-csv button\" (click)=\"downloadCSV()\">\n            <i class=\"fa-solid fa-file-csv\" style=\"color: #0a0a0a;\"></i>\n        </button>\n    </div>\n    \n    <div id=\"datePicker\">\n    <mat-form-field class=\"example-form-field hide-in-pdf\">\n      <mat-label>Selecione um intervalo</mat-label>\n      <mat-date-range-input [rangePicker]=\"rangePicker\">\n        <input matStartDate placeholder=\"Data Inicial\" \n               (dateChange)=\"handleStartDateChange($event)\">\n        <input matEndDate placeholder=\"Data Final\" \n               (dateChange)=\"handleEndDateChange($event)\">\n      </mat-date-range-input>\n      <mat-datepicker-toggle matIconSuffix [for]=\"rangePicker\"></mat-datepicker-toggle>\n      <mat-date-range-picker #rangePicker>\n        <mat-date-range-picker-actions>\n          <button mat-button matDateRangePickerCancel>Cancelar</button>\n          <button mat-raised-button matDateRangePickerApply>Selecionar</button>\n        </mat-date-range-picker-actions>\n      </mat-date-range-picker>\n    </mat-form-field>\n    </div>\n    </header>\n    <div id=\"main\" class=\"loading\" *ngIf=\"loading\">\n        <mat-progress-spinner mode=\"indeterminate\" color=\"accent\" style=\"width: 32px;\"></mat-progress-spinner>\n    </div>\n    <mat-table [dataSource]=\"dados\" matSort (matSortChange)=\"sortData($event)\" class=\"mat-elevation-z8\">\n      <ng-container matColumnDef=\"deviceName\">\n        <mat-header-cell *matHeaderCellDef >Loja</mat-header-cell>\n        <mat-cell *matCellDef=\"let row\"> {{ row.name }}  </mat-cell>\n      </ng-container>\n      <ng-container matColumnDef=\"deviceId\">\n        <mat-header-cell *matHeaderCellDef >Identificador</mat-header-cell>\n        <mat-cell *matCellDef=\"let row\"> {{ row.deviceId }}  </mat-cell>\n      </ng-container>\n      <ng-container matColumnDef=\"m3\">\n        <mat-header-cell *matHeaderCellDef>Leitura</mat-header-cell>\n        <mat-cell *matCellDef=\"let row\"> {{ row.m3 }} m³ </mat-cell>\n      </ng-container>\n      <mat-header-row *matHeaderRowDef=\"['deviceName', 'deviceId', 'm3']\"></mat-header-row>\n      <mat-row *matRowDef=\"let row; columns: ['deviceName', 'deviceId', 'm3']\"></mat-row>\n    </mat-table>\n</div>",
      "templateCss" : "#container {\r\n    overflow-y: auto;\r\n}\r\n\r\n#main.loading {\r\n    height: 100%;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: absolute;\r\n}\r\n\r\n#Myio{\r\n    width: 150px;\r\n    background-color: #3e1a7d;\r\n    padding: 10px;\r\n    border-radius: 5px;\r\n}\r\n\r\n#ReportHeader{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-end;\r\n    padding: 5px;\r\n}\r\n#myioHeader{\r\n    display: flex;\r\n    padding: 5px; \r\n}\r\n#myioTextHeader{\r\n    display: flex;\r\n    flex-direction:column;\r\n    padding: 5px;\r\n}\r\n\r\np{\r\n    font-size: 13px;\r\n    margin: 0;\r\n    font-family: Roboto;\r\n}\r\n\r\n.button{\r\n    all: unset;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    top: 8px;\r\n    right: 40px;\r\n}\r\n\r\n.example-form-field{\r\n    margin: 0;\r\n}\r\n.hide-in-csv.button{\r\n    right: 60px;\r\n}\r\n\r\n",
      "controllerScript" : "/* jshint esversion: 11 */\n\n// Constants\nconst PURPLE_COLOR = [92, 48, 125];\nconst STRIPE_COLOR = [245, 247, 250];\nconst PAGE_MARGIN = 10;\nconst LINE_HEIGHT = 10;\nconst LOGO_URL = 'https://dashboard.myio-bas.com/api/images/public/TAfpmF6jEKPDi6hXHbnMUT8MWOHv5lKD';\n\n// State management\nconst state = {\n    startDate: null,\n    endDate: null,\n    deviceNameLabelMap: {},\n    loading: false,\n    data: []\n};\n\n// Utility functions\nfunction formatDate(date) {\n    return new Date(date).toLocaleDateString('pt-BR');\n}\n\nfunction toFixed(value) {\n    if (value == null) return value;\n    return Number(value).toFixed(2);\n}\n\nfunction exportToCSV(reportData) {\n    if (!reportData?.length) {\n        alert('Erro: Nenhum dado disponível para exportar.');\n        return;\n    }\n\n    const rows = [\n        ['Loja', 'Identificador', 'Consumo (m³)']\n    ];\n\n    reportData.forEach(data => {\n        rows.push([\n            data.name || '-',\n            data.deviceId || '-',\n            data.m3 ? toFixed(data.m3) : '0.00',\n        ]);\n    });\n\n    const csvContent = \"data:text/csv;charset=utf-8,\" + rows.map(e => e.join(\";\")).join(\"\\n\");\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodeURI(csvContent));\n    link.setAttribute(\"download\", `relatorio_consumo_${new Date().toISOString().slice(0,10)}.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n\nfunction exportToPDF(reportData, startDate, endDate) {\n    if (!reportData || !Array.isArray(reportData) || reportData.length === 0) {\n        alert('Erro: Nenhum dado disponível para exportar.');\n        return;\n    }\n    \n    const doc = new window.jspdf.jsPDF();\n    const pageWidth = doc.internal.pageSize.width;\n    const pageHeight = doc.internal.pageSize.height;\n    const purple = [92, 48, 125];\n    const margin = 10;\n    const lineHeight = 10;\n    const colWidth = (pageWidth - 2 * margin) / 2; \n\n    function addHeader() {\n        doc.setFillColor(...purple);\n        doc.rect(0, 0, pageWidth, 50, 'F');\n\n        const logoHeight = 25;\n        const logoWidth = Math.round(logoHeight * (512 / 194));\n        const logoX = 15;\n        const logoY = 12;\n\n        doc.addImage(\n            'https://dashboard.myio-bas.com/api/images/public/TAfpmF6jEKPDi6hXHbnMUT8MWOHv5lKD',\n            'PNG',\n            logoX,\n            logoY,\n            logoWidth,\n            logoHeight\n        );\n\n        const textStartX = logoX + logoWidth + 20;\n        const availableWidth = pageWidth - textStartX - 15;\n        const textCenterX = textStartX + availableWidth / 2;\n \n        doc.setFontSize(12);\n        doc.setTextColor(255, 255, 255);\n        doc.text('Sistema Myio | Registro de Consumo m³', textCenterX, 15, { align: 'center' });\n        doc.text(`${self.ctx.$scope.subtitle}`, textCenterX, 23, { align: 'center' })\n        doc.text(`Data de Emissão: ${new Date().toLocaleDateString('pt-BR')}`, textCenterX, 31, { align: 'center' });\n\n        const fromDate = new Date(startDate.setDate(startDate.getDate()+1)).toLocaleDateString('pt-BR');\n        const toDate = new Date(endDate.setDate(endDate.getDate() - 1)).toLocaleDateString('pt-BR');\n        \n      \n        \n        doc.text(`Período de ${fromDate} até ${toDate}`, textCenterX, 39, { align: 'center' });\n    }\n\n    function addTableHeader(startY) {\n        doc.setFillColor(...purple);\n        doc.rect(margin, startY, pageWidth - 2 * margin, lineHeight, 'F');\n\n        const headers = ['Loja', 'Identificador', 'Consumo (m³)']\n        doc.setTextColor(255, 255, 255);\n        doc.setFontSize(10);\n        headers.forEach((header, i) => {\n            doc.text(header, margin + i * colWidth + colWidth / 2, startY + 7, { align: 'center' });\n        });\n    }\n\n    function addTableRow(rowData, startY, isStriped) {\n        if (isStriped) {\n            doc.setFillColor(245, 247, 250);\n            doc.rect(margin, startY, pageWidth - 2 * margin, lineHeight, 'F');\n        }\n\n        rowData.forEach((text, i) => {\n            doc.setTextColor(0, 0, 0);\n            doc.text(String(text), margin + i * colWidth + colWidth / 2, startY + 7, { align: 'center' });\n        });\n    }\n\n    addHeader();\n\n    let startY = 60;\n    addTableHeader(startY);\n    startY += lineHeight;\n\n    reportData.forEach((data, index) => {\n        if (startY > pageHeight - 20) {\n            doc.addPage();\n            startY = 20;\n            addTableHeader(startY);\n            startY += lineHeight;\n        }\n       \n        const rowData = [\n            data.name || '-',\n            data.deviceId || '-',\n            data.m3 ? `${toFixed(data.m3)} m³` : '-'\n        ];\n\n        addTableRow(rowData, startY, index % 2 === 0);\n        startY += lineHeight;\n    });\n\n    doc.setFontSize(10);\n    doc.setTextColor(0, 0, 0);\n    doc.text(`Página 1 de 1`, pageWidth / 2, pageHeight - 10, { align: 'center' });\n\n    doc.save(`relatorio_consumo_${new Date().toISOString().slice(0,10)}.pdf`);\n}\n\nasync function getMultipleSlaveConsumption(centralId, devices, startTs, endTs) {\n    const $http = self.ctx.$scope.$injector.get(self.ctx.servicesMap.get('http'));\n    const names = encodeURIComponent(devices);\n    \n    console.log('Will query for central id: ' + centralId);\n    console.log(devices);\n    \n    try {\n        const response = await $http.get(\n            `https://${centralId}.y.myio.com.br/api/dash_api/v2/devices_pulses/${names}/${startTs}/${endTs}`,\n            { timeout: 30000 }\n        ).toPromise();\n        console.log('API Response for centralId', centralId, ':', response);\n        return response;\n    } catch (error) {\n        console.error('Error fetching consumption data:', error);\n        throw new Error('Falha ao buscar dados de consumo');\n    }\n}\n\n// Data processing\nasync function processConsumptionData() {\n    if (!state.startDate || !state.endDate) {\n        alert('Por favor, selecione datas de início e fim.');\n        return;\n    }\n\n    state.loading = true;\n    self.ctx.$scope.loading = true;\n    self.ctx.detectChanges();\n\n    try {\n        // 1. Build a map of entityId -> { centralId, slaveId, name, deviceId }\n        console.log('[DEBUG] self.ctx.data length:', (self.ctx.data || []).length);\n        const deviceMap = {};\n        (self.ctx.data || []).forEach(item => {\n            const entityId = item?.datasource?.entityId;\n            if (!entityId) return;\n            if (!deviceMap[entityId]) {\n                deviceMap[entityId] = {\n                    name: item?.datasource?.entityLabel || '-', // Use entityLabel for label\n                    deviceId: entityId\n                };\n            }\n            if (item.dataKey?.name === 'centralId') {\n                deviceMap[entityId].centralId = item?.data?.[0]?.[1];\n            }\n            if (item.dataKey?.name === 'slaveId') {\n                deviceMap[entityId].slaveId = item?.data?.[0]?.[1];\n            }\n            if (item.dataKey?.name === 'deviceId') {\n                deviceMap[entityId].deviceId = item?.data?.[0]?.[1];\n            }\n        });\n        const uniqueEntityIds = Object.keys(deviceMap);\n        console.log('[DEBUG] unique entityIds found:', uniqueEntityIds.length);\n        console.log('[DEBUG] deviceMap:', deviceMap);\n\n        // Log devices missing either centralId or slaveId\n        Object.values(deviceMap).forEach(d => {\n            if (!d.centralId || !d.slaveId) {\n                const missing = [];\n                if (!d.centralId) missing.push('centralId');\n                if (!d.slaveId) missing.push('slaveId');\n                console.warn(`[DEBUG] Device missing ${missing.join(' and ')}:`, d.name, d.deviceId);\n            }\n        });\n\n        // 2. Build the device list (only those with both IDs)\n        const deviceList = Object.values(deviceMap).filter(d => d.centralId && d.slaveId);\n        console.log('[DEBUG] deviceList with both IDs:', deviceList.length, deviceList);\n\n        // 3. Group slaveIds by centralId\n        const grouped = {};\n        deviceList.forEach(device => {\n            if (!grouped[device.centralId]) grouped[device.centralId] = [];\n            grouped[device.centralId].push(device);\n        });\n        console.log('[DEBUG] grouped by centralId:', grouped);\n        Object.entries(grouped).forEach(([centralId, devices]) => {\n            console.log(`[DEBUG] centralId ${centralId} has ${devices.length} devices`);\n        });\n\n        // 4. Query the API for each centralId\n        const allResults = await Promise.all(Object.entries(grouped).map(async ([centralId, devices]) => {\n            const slaveIds = devices.map(d => d.slaveId);\n            const startDate = new Date(state.startDate);\n            const endDate = new Date(state.endDate);\n            console.log({\n                start: startDate,\n                end: endDate\n            });\n            const response = await getMultipleSlaveConsumption(\n                centralId,\n                slaveIds,\n                startDate.getTime(),\n                endDate.getTime()\n            );\n            // Attach device info for mapping\n            return { centralId, response, devices };\n        }));\n\n        // 5. Map API results to device info for display/export\n        const processedData = allResults.flatMap(({response, devices}) => {\n            if (!Array.isArray(response)) return [];\n\n            return response.map(data => {\n                const slaveId = data?.slave_id || data?.slaveId;\n                const match = devices.find(d => d.slaveId == slaveId);\n                return {\n                    m3: Number(data?.total_consumption_m3).toFixed(2) || 0,\n                    name: match?.name || '-',\n                    deviceId: match?.deviceId || '-',\n                };\n            });\n        }).filter(Boolean);\n\n        self.ctx.$scope.dados = processedData;\n        if (self.ctx.$scope.sort) self.ctx.$scope.sort.update();\n    } catch (error) {\n        console.error('Error in processConsumptionData:', error);\n    } finally {\n        state.loading = false;\n        self.ctx.$scope.loading = false;\n        self.ctx.detectChanges();\n    }\n}\n\n\n// Event handlers\nfunction handleStartDateChange(event) {\n    state.startDate = new Date(event.value);\n    state.startDate.setHours(0, 0, 0, 0); // Set to start of the day\n    self.ctx.$scope.startDate = state.startDate;\n    \n    if (state.startDate && state.endDate) {\n        processConsumptionData();\n    }\n}\n\nfunction handleEndDateChange(event) {\n    state.endDate = new Date(event.value);\n    state.endDate.setHours(23, 59, 59, 999); // Set to end of the day\n    self.ctx.$scope.endDate = state.endDate;\n    \n    if (state.startDate && state.endDate) {\n        processConsumptionData();\n    }\n}\n\nasync function getServerDeviceId(datasource) {\n    if (!datasource || !datasource.entityId) {\n        console.error('Datasource inválido ou sem entityId:', datasource);\n        return null;\n    }\n\n    try {\n        const attributeService = self.ctx.$scope.$injector.get(self.ctx.servicesMap.get('attributeService'));\n        const deviceEntityId = { \n            id: datasource.entityId, \n            entityType: 'DEVICE' \n        };\n\n        const attributes = await attributeService.getEntityAttributes(\n            deviceEntityId, \n            'SERVER_SCOPE', \n            ['deviceId']\n        ).toPromise();\n        \n        const deviceIdAttr = attributes.find(attr => attr.key === 'deviceId');\n        return deviceIdAttr?.value || null;\n        \n    } catch (error) {\n        console.error('Erro ao obter deviceId:', error);\n        return null;\n    }\n}\n\n\nself.onInit = async function() {\n    console.log(\"Data\",self.ctx)\n    state.deviceNameLabelMap = self.ctx.datasources.reduce((acc, datasource) => {\n        const cleanName = datasource.entityName.replace(/\\s*\\([^)]*\\)\\s*$/, '').trim();\n        acc[cleanName] = datasource.entityLabel;\n        return acc;\n    }, {});\n    \n    self.ctx.$scope.emissionDate = formatDate(new Date());\n    self.ctx.$scope.devices = self.ctx.data;\n    self.ctx.$scope.handleStartDateChange = handleStartDateChange;\n    self.ctx.$scope.handleEndDateChange = handleEndDateChange;\n    self.ctx.$scope.subtitle = self.ctx.settings.subtitle;\n    \n    self.ctx.$scope.downloadPDF = () => {\n        if (self.ctx.$scope.dados && self.ctx.$scope.dados.length > 0) {\n            exportToPDF(self.ctx.$scope.dados, self.ctx.$scope.startDate, self.ctx.$scope.endDate);\n        } else {\n            alert(\"Sem dados disponíveis para exportar.\");\n        }\n    };\n    self.ctx.$scope.downloadCSV = () => {\n            if (self.ctx.$scope.dados?.length) {\n                exportToCSV(self.ctx.$scope.dados);\n            } else {\n                alert(\"Sem dados disponíveis para exportar.\");\n            }\n        };\n    \n        self.ctx.$scope.sortData = function(sort) {\n        console.log('[DEBUG] sortData called with:', sort);\n        if (!sort || !sort.active || sort.direction === '') return;\n        if (self.ctx.$scope.dados.length > 0) {\n            console.log('[DEBUG] keys of first row:', Object.keys(self.ctx.$scope.dados[0]));\n        }\n        console.log('[DEBUG] sort.active:', sort.active);\n        console.log('[DEBUG] dados before sort:', JSON.stringify(self.ctx.$scope.dados));\n    const propMap = {\n      deviceName: 'name',\n      deviceId: 'deviceId',\n      m3: 'm3'\n    };\n    \n    self.ctx.$scope.dados.sort((a, b) => {\n      const active = sort.active;\n      const dir = sort.direction === 'asc' ? 1 : -1;\n      const prop = propMap[active];\n    \n      if (!prop) return 0;\n    \n      let valueA = a[prop];\n      let valueB = b[prop];\n    \n      console.log(`[DEBUG] Sorting by '${active}' mapped to '${prop}'`);\n      console.log(`[DEBUG] Comparing: valueA (${valueA}) vs valueB (${valueB})`);\n    \n      if (typeof valueA === 'string') valueA = valueA.toLowerCase();\n      if (typeof valueB === 'string') valueB = valueB.toLowerCase();\n    \n      if (valueA < valueB) return -1 * dir;\n      if (valueA > valueB) return 1 * dir;\n      return 0;\n    });\n\n        // Force Angular to update the table by replacing the array reference\n        self.ctx.$scope.dados = [...self.ctx.$scope.dados];\n        console.log('[DEBUG] dados after sort:', JSON.stringify(self.ctx.$scope.dados));\n        self.ctx.detectChanges();\n    };\n    \n    \tself.ctx.$scope.selectedOrder = 'name-asc';\n\t\n\tself.ctx.$scope.handleManualSort = function (value) {\n\t\tconst [prop, dir] = value.split('-');\n\t\tconst direction = dir === 'asc' ? 1 : -1;\n\n\t\tconsole.log(`[DEBUG] Manual sort: ${prop} (${dir})`);\n        console.log(\"Dados\",dados)\n\t\tself.ctx.$scope.dados.sort((a, b) => {\n\t\t\tlet valA = a[prop];\n\t\t\tlet valB = b[prop];\n\n\t\t\tif (typeof valA === 'string') valA = valA.toLowerCase();\n\t\t\tif (typeof valB === 'string') valB = valB.toLowerCase();\n\n\t\t\tif (valA < valB) return -1 * direction;\n\t\t\tif (valA > valB) return 1 * direction;\n\t\t\treturn 0;\n\t\t});\n\n\t\t// Atualiza visualmente\n\t\tself.ctx.$scope.dados = [...self.ctx.$scope.dados];\n\t\tself.ctx.detectChanges();\n\t};\n    self.ctx.detectChanges();\n};\n\nself.onDataUpdated = function() {\n    self.ctx.detectChanges();\n};\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Settings\",\r\n        \"properties\": {\r\n            \"subtitle\":{\r\n                \"type\":\"string\",\r\n                \"title\": \"Subtítulo do Relatorio\"\r\n            }\r\n        },\r\n        \"required\": [\"subtitle\"]\r\n    },\r\n    \"form\": [\r\n        \"subtitle\"\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "hasBasicMode" : false,
      "defaultConfig" : "{\"showTitle\":false,\"backgroundColor\":\"#FFFFFF\",\"color\":\"rgb(0, 0, 0)\",\"padding\":\"8px\",\"settings\":{\"centralId\":\"6354365436543654-Sdvzs2f5dbv4z2sd5f4v3z6d\"},\"title\":\"Histórico Geral de Consumo (SlaveId) (Água) DEV\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":true,\"borderRadius\":\"10px\",\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"enableDataExport\":false,\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.25096343243849395,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}}}"
    },
    "externalId" : null,
    "resources" : null,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "06a54840-3108-11f0-8cbd-2b87fdb093e1"
    },
    "scada" : false,
    "tags" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}